(()=>{var e={};e.id=1442,e.ids=[1442],e.modules={643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11072:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"40c4f134c1d8835a3d186274c98e6f9961ce375622":()=>s.Y});var s=t(83197)},12412:e=>{"use strict";e.exports=require("assert")},13846:(e,r,t)=>{"use strict";t.d(r,{ai:()=>o});var s=t(97955),i=t(54563);let o=(0,s.genkit)({plugins:[(0,i.YF)()],model:"googleai/gemini-2.5-flash"})},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},18868:()=>{},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},19185:e=>{"use strict";e.exports=require("dgram")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},44708:e=>{"use strict";e.exports=require("node:https")},44725:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=44725,e.exports=r},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},52700:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>b,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{POST:()=>c});var i=t(96559),o=t(48088),n=t(37719),a=t(32190),u=t(83197);async function c(e){try{console.log("API Key available:",!!process.env.GEMINI_API_KEY);let r=await e.json();console.log("Nutrition label scan request body:",r);let t=await (0,u.Y)(r);return console.log("Nutrition label scan result:",t),a.NextResponse.json(t)}catch(e){return console.error("Error in nutrition label scan API:",e),a.NextResponse.json({error:"Failed to scan nutrition label",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/ai/scan-nutrition-label/route",pathname:"/api/ai/scan-nutrition-label",filename:"route",bundlePath:"app/api/ai/scan-nutrition-label/route"},resolvedPagePath:"/Users/ghadaalani/Desktop/mind-main/src/app/api/ai/scan-nutrition-label/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:m}=p;function b(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},81630:e=>{"use strict";e.exports=require("http")},83197:(e,r,t)=>{"use strict";t.d(r,{Y:()=>p});var s=t(67218);t(79130);var i=t(13846),o=t(97955),n=t(17478);let a=o.z.object({photoDataUri:o.z.string().describe("A photo of a nutrition label, as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.")}),u=o.z.object({name:o.z.string().describe("The name of the food product."),servingSize:o.z.string().describe('The serving size as shown on the label (e.g., "1 cup", "28g", "2 pieces").'),servingsPerContainer:o.z.string().describe("The number of servings per container."),calories:o.z.number().describe("Calories per serving."),totalFat:o.z.number().describe("Total fat in grams per serving."),saturatedFat:o.z.number().describe("Saturated fat in grams per serving."),transFat:o.z.number().describe("Trans fat in grams per serving."),cholesterol:o.z.number().describe("Cholesterol in milligrams per serving."),sodium:o.z.number().describe("Sodium in milligrams per serving."),totalCarbohydrates:o.z.number().describe("Total carbohydrates in grams per serving."),dietaryFiber:o.z.number().describe("Dietary fiber in grams per serving."),totalSugars:o.z.number().describe("Total sugars in grams per serving."),addedSugars:o.z.number().describe("Added sugars in grams per serving."),protein:o.z.number().describe("Protein in grams per serving."),vitaminD:o.z.number().describe("Vitamin D in micrograms per serving."),calcium:o.z.number().describe("Calcium in milligrams per serving."),iron:o.z.number().describe("Iron in milligrams per serving."),potassium:o.z.number().describe("Potassium in milligrams per serving.")}),c=o.z.object({nutritionInfo:u.describe("The extracted nutritional information from the label."),confidence:o.z.number().describe("Confidence level of the extraction (0-1)."),notes:o.z.string().describe("Any additional notes or observations about the label.")});async function p(e){return d(e)}let l=i.ai.definePrompt({name:"scanNutritionLabelPrompt",input:{schema:a},output:{schema:c},prompt:`You are a nutrition expert. Analyze the provided photo of a nutrition label and extract all the nutritional information accurately.

  Extract the following information from the nutrition label:
  - Product name
  - Serving size
  - Servings per container
  - All nutritional values per serving (calories, fats, cholesterol, sodium, carbohydrates, fiber, sugars, protein, vitamins, minerals)

  Be as accurate as possible with the numbers. If any information is not clearly visible or readable, note it in the notes field.

  Photo: {{media url=photoDataUri}}`}),d=i.ai.defineFlow({name:"scanNutritionLabelFlow",inputSchema:a,outputSchema:c},async e=>{let{output:r}=await l(e);return r});(0,n.D)([p]),(0,s.A)(p,"40c4f134c1d8835a3d186274c98e6f9961ce375622",null)},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,6724,580,8906],()=>t(52700));module.exports=s})();