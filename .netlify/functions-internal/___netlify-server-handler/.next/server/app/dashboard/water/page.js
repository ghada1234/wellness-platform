(()=>{var e={};e.id=8497,e.ids=[8497],e.modules={864:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var a=s(65239),r=s(48088),l=s(88170),i=s.n(l),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o={children:["",{children:["dashboard",{children:["water",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,52819)),"/Users/ghadaalani/Desktop/mind-main/src/app/dashboard/water/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63144)),"/Users/ghadaalani/Desktop/mind-main/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/ghadaalani/Desktop/mind-main/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/ghadaalani/Desktop/mind-main/src/app/dashboard/water/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/water/page",pathname:"/dashboard/water",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15272:(e,t,s)=>{"use strict";s.d(t,{f:()=>d});var a=s(43210),r=s(75535),l=s(33784),i=s(31568);let n=()=>{let e=new Date,t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`},d=()=>{let{user:e}=(0,i.A)(),[t,s]=(0,a.useState)({glasses:0,goal:8}),[d,o]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),h=(0,a.useRef)(null),x=n(),g=(0,a.useCallback)(async()=>{if(!e)return void o(!1);o(!0),u(null);try{let t=(0,r.H9)(l.db,"waterIntake",`${e.uid}_${x}`),a=await (0,r.x7)(t);if(a.exists()){let e=a.data();s({glasses:e.glasses,goal:e.goal}),p(!0)}else s({glasses:0,goal:8}),p(!1)}catch(e){u(e instanceof Error?e:Error("Failed to fetch water intake"))}finally{o(!1)}},[e,x]);(0,a.useEffect)(()=>{g()},[g]);let f=(0,a.useCallback)(async(t,s)=>{if(!e)return void u(Error("User not authenticated"));try{let a=(0,r.H9)(l.db,"waterIntake",`${e.uid}_${x}`);if(m){let e={glasses:t,updatedAt:r.Dc.now()};void 0!==s&&(e.goal=s),await (0,r.mZ)(a,e)}else{let l={id:x,userId:e.uid,glasses:t,goal:s||8,date:x,createdAt:r.Dc.now(),updatedAt:r.Dc.now()};await (0,r.BN)(a,l),p(!0)}u(null)}catch(e){u(e instanceof Error?e:Error("Failed to update water intake"))}},[e,x,m]),j=async a=>{if(!e)return void u(Error("User not authenticated"));try{s(e=>({...e,goal:a})),await f(t.glasses,a)}catch(e){u(e instanceof Error?e:Error("Failed to update water goal"))}};return(0,a.useEffect)(()=>()=>{h.current&&clearTimeout(h.current)},[]),{waterIntake:t,loading:d,error:c,updateWaterIntake:t=>{if(!e)return void u(Error("User not authenticated"));s(e=>({...e,glasses:t})),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{f(t)},1500)},updateWaterGoal:j}}},15812:(e,t,s)=>{Promise.resolve().then(s.bind(s,56261))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35137:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},37366:e=>{"use strict";e.exports=require("dns")},44610:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},47237:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s(43210),r=s(75535),l=s(33784),i=s(31568);let n=(e,t={})=>{let{user:s,loading:n}=(0,i.A)(),[d,o]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[j,y]=(0,a.useState)(!0),v=(0,a.useMemo)(()=>t,[t.daily,t.limit]),w=(0,a.useCallback)(async(t=!1,a=null)=>{if(!s)return void u(!1);t?p(!0):u(!0),x(null);try{console.log("Fetching data for user:",s.uid,"path:",e);let i=[(0,r._M)("userId","==",s.uid)];if(v.daily){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());i.push((0,r._M)("createdAt",">=",r.Dc.fromDate(t)))}i.push((0,r.My)("createdAt","desc"));let n=v.limit||10;v.limit&&i.push((0,r.AB)(n)),t&&a&&i.push((0,r.HM)(a));let d=(0,r.P)((0,r.rJ)(l.db,e),...i),c=await (0,r.GG)(d),u=c.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}));console.log(`Fetched ${u.length} documents from ${e}:`,u);let m=c.docs[c.docs.length-1]||null;f(m),y(!!v.limit&&u.length===n),t?o(e=>[...e,...u]):o(u)}catch(t){console.error("Error fetching data from",e,":",t),x(t instanceof Error?t:Error("Failed to fetch data"))}finally{u(!1),p(!1)}},[s,e,v]);(0,a.useEffect)(()=>{if(n)return void u(!0);s?(console.log("User authenticated, fetching data for path:",e),w(!1,null)):(console.log("No user, clearing data for path:",e),o([]),u(!1),y(!1),f(null),x(null))},[s,n,e]);let b=async(t,a)=>{if(!s){let e=Error("User not authenticated");throw x(e),e}let i=[...d];o(e=>e.map(e=>e.id===t?{...e,...a}:e));try{let s=(0,r.H9)(l.db,e,t);await (0,r.mZ)(s,a)}catch(e){throw x(e instanceof Error?e:Error("Failed to update document")),o(i),e}},N=async t=>{if(!s){let e=Error("User not authenticated");throw x(e),e}let a=[...d];o(e=>e.filter(e=>e.id!==t));try{await (0,r.kd)((0,r.H9)(l.db,e,t))}catch(e){throw x(e instanceof Error?e:Error("Failed to delete document")),o(a),e}};return{data:d,loading:c,error:h,addDocument:async t=>{if(!s){let e=Error("User not authenticated");throw x(e),e}let a=`temp_${Date.now()}`,i={id:a,...t,userId:s.uid,createdAt:new Date};o(e=>[i,...e].sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));try{let i=await (0,r.gS)((0,r.rJ)(l.db,e),{...t,userId:s.uid,createdAt:r.Dc.now()});return o(e=>e.map(e=>e.id===a?{...e,id:i.id}:e)),i.id}catch(e){throw x(e instanceof Error?e:Error("Failed to add document")),o(e=>e.filter(e=>e.id!==a)),e}},updateDocument:b,deleteDocument:N,refetch:()=>w(!1,null),loadMore:()=>{j&&!m&&w(!0,g)},hasMore:j,loadingMore:m}}},52819:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ghadaalani/Desktop/mind-main/src/app/dashboard/water/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ghadaalani/Desktop/mind-main/src/app/dashboard/water/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},56261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(60687),r=s(11516),l=s(40219),i=s(35137),n=s(44610),d=s(57207),o=s(43210),c=s(27605),u=s(63442),m=s(43214),p=s(44493),h=s(29523),x=s(89667),g=s(71669),f=s(29867),j=s(47237),y=s(15272);let v=m.Ik({glasses:m.au.number().min(0,"Must be a positive number"),goal:m.au.number().min(1,"Goal must be at least 1"),date:m.Yj().nonempty("Date is required")}),w=()=>new Date().toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"});function b(){let{data:e,loading:t,addDocument:s,updateDocument:m,deleteDocument:b}=(0,j.j)("waterIntake",{limit:50}),{waterIntake:N,updateWaterGoal:k,updateWaterIntake:A}=(0,y.f)(),[E,C]=o.useState(!1),[D,I]=o.useState(null),{toast:M}=(0,f.dj)(),$=(0,c.mN)({resolver:(0,u.u)(v),defaultValues:{glasses:N.glasses,goal:N.goal,date:w()}});o.useEffect(()=>{D?$.reset({glasses:D.glasses,goal:D.goal,date:D.date}):$.reset({glasses:N.glasses,goal:N.goal,date:w()})},[D,$,N]);let q=async e=>{C(!0);try{A(e.glasses),e.goal!==N.goal&&await k(e.goal),M({title:"Water log saved!"}),$.reset({glasses:8,goal:N.goal,date:w()})}catch(e){M({variant:"destructive",title:"Failed to save",description:"Could not save the water log. Please try again."})}finally{C(!1)}},P=e=>{I(e)},F=async e=>{try{await b(e),M({title:"Water log deleted."})}catch(e){M({variant:"destructive",title:"Failed to delete log"})}};return(0,a.jsxs)("div",{className:"flex-1 space-y-6 p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Water Log"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track and manage your daily water intake history."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(p.Zp,{children:(0,a.jsx)(g.lV,{...$,children:(0,a.jsxs)("form",{onSubmit:$.handleSubmit(q),children:[(0,a.jsx)(p.aR,{children:(0,a.jsx)(p.ZB,{children:D?"Edit Entry":"Add New Entry"})}),(0,a.jsxs)(p.Wu,{className:"space-y-4",children:[(0,a.jsx)(g.zB,{control:$.control,name:"glasses",render:({field:e})=>(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Glasses of Water"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(x.p,{type:"number",...e})}),(0,a.jsx)(g.C5,{})]})}),(0,a.jsx)(g.zB,{control:$.control,name:"goal",render:({field:e})=>(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Daily Goal (Glasses)"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(x.p,{type:"number",...e})}),(0,a.jsx)(g.C5,{})]})}),(0,a.jsx)(g.zB,{control:$.control,name:"date",render:({field:e})=>(0,a.jsxs)(g.eI,{children:[(0,a.jsx)(g.lR,{children:"Date"}),(0,a.jsx)(g.MJ,{children:(0,a.jsx)(x.p,{type:"text",placeholder:"e.g., 7/25/2024",...e})}),(0,a.jsx)(g.C5,{})]})})]}),(0,a.jsxs)(p.wL,{className:"flex justify-between",children:[(0,a.jsxs)(h.$,{type:"submit",disabled:E,children:[E&&(0,a.jsx)(r.A,{className:"mr-2 h-4 w-4 animate-spin"}),D?"Save Changes":"Add Entry"]}),D&&(0,a.jsx)(h.$,{variant:"ghost",onClick:()=>I(null),children:"Cancel"})]})]})})})}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(p.Zp,{children:[(0,a.jsxs)(p.aR,{children:[(0,a.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-5 w-5"}),"Today's Water Goal"]}),(0,a.jsxs)(p.BT,{children:["Current goal: ",N.goal," glasses per day"]})]}),(0,a.jsx)(p.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[N.glasses," / ",N.goal," glasses"]})]}),(0,a.jsx)("div",{className:"w-full bg-secondary rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(N.glasses/N.goal*100,100)}%`}})})]}),(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{let e=prompt("Enter new daily water goal (glasses):",N.goal.toString());e&&!isNaN(parseInt(e))&&parseInt(e)>=1&&20>=parseInt(e)?(k(parseInt(e)),M({title:"Goal Updated!",description:`Your daily water goal is now ${e} glasses.`})):e&&M({variant:"destructive",title:"Invalid Goal",description:"Please enter a number between 1 and 20."})},children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Update Goal"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>A(N.glasses+1),disabled:N.glasses>=N.goal,children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"+1 Glass"]}),(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>A(N.glasses+2),disabled:N.glasses>=N.goal-1,children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"+2 Glasses"]}),(0,a.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{let e=prompt("Enter number of glasses to add:","1");e&&!isNaN(parseInt(e))&&parseInt(e)>0&&A(N.glasses+parseInt(e))},children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Custom"]})]})]})})]}),(0,a.jsxs)(p.Zp,{children:[(0,a.jsx)(p.aR,{children:(0,a.jsx)(p.ZB,{children:"History"})}),(0,a.jsx)(p.Wu,{children:t?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)(r.A,{className:"h-8 w-8 animate-spin"})}):0===e.length?(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,a.jsx)(n.A,{className:"mx-auto h-12 w-12"}),(0,a.jsx)("p",{className:"mt-4 font-semibold",children:"No water intake logged yet."}),(0,a.jsx)("p",{className:"text-sm",children:"Go to the Nutrition page to track your water today."})]}):(0,a.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.A,{className:"h-6 w-6 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold",children:[e.glasses," / ",e.goal," glasses"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.date})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>P(e),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>F(e.id),children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]})]},e.id))})})]})]})]})]})}},56479:(e,t,s)=>{Promise.resolve().then(s.bind(s,52819))},57207:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71669:(e,t,s)=>{"use strict";s.d(t,{C5:()=>f,MJ:()=>g,eI:()=>h,lR:()=>x,lV:()=>o,zB:()=>u});var a=s(60687),r=s(43210),l=s(11329),i=s(27605),n=s(4780),d=s(80013);let o=i.Op,c=r.createContext({}),u=({...e})=>(0,a.jsx)(c.Provider,{value:{name:e.name},children:(0,a.jsx)(i.xI,{...e})}),m=()=>{let e=r.useContext(c),t=r.useContext(p),{getFieldState:s,formState:a}=(0,i.xW)(),l=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...l}},p=r.createContext({}),h=r.forwardRef(({className:e,...t},s)=>{let l=r.useId();return(0,a.jsx)(p.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:s,className:(0,n.cn)("space-y-2",e),...t})})});h.displayName="FormItem";let x=r.forwardRef(({className:e,...t},s)=>{let{error:r,formItemId:l}=m();return(0,a.jsx)(d.J,{ref:s,className:(0,n.cn)(r&&"text-destructive",e),htmlFor:l,...t})});x.displayName="FormLabel";let g=r.forwardRef(({...e},t)=>{let{error:s,formItemId:r,formDescriptionId:i,formMessageId:n}=m();return(0,a.jsx)(l.DX,{ref:t,id:r,"aria-describedby":s?`${i} ${n}`:`${i}`,"aria-invalid":!!s,...e})});g.displayName="FormControl",r.forwardRef(({className:e,...t},s)=>{let{formDescriptionId:r}=m();return(0,a.jsx)("p",{ref:s,id:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})}).displayName="FormDescription";let f=r.forwardRef(({className:e,children:t,...s},r)=>{let{error:l,formMessageId:i}=m(),d=l?String(l?.message??""):t;return d?(0,a.jsx)("p",{ref:r,id:i,className:(0,n.cn)("text-sm font-medium text-destructive",e),...s,children:d}):null});f.displayName="FormMessage"},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var a=s(60687),r=s(43210),l=s(78148),i=s(24224),n=s(4780);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(l.b,{ref:s,className:(0,n.cn)(d(),e),...t}));o.displayName=l.b.displayName},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4447,6724,5227,1658,2123,7856,4136,4414],()=>s(864));module.exports=a})();