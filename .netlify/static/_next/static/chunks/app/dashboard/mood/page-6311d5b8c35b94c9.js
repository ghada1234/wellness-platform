(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4269],{9757:(e,t,r)=>{Promise.resolve().then(r.bind(r,71371))},22100:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(12115),a=r(68437);let n=()=>(0,s.useContext)(a.c)},26126:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(95155);r(12115);var a=r(74466),n=r(59434);let o=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(o({variant:r}),t),...a})}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var s=r(95155),a=r(12115),n=r(66634),o=r(74466),l=r(59434);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:i=!1,...c}=e,u=i?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(d({variant:a,size:o,className:r})),ref:t,...c})});i.displayName="Button"},30356:(e,t,r)=>{"use strict";r.d(t,{C:()=>i,z:()=>d});var s=r(95155),a=r(12115),n=r(54059),o=r(70154),l=r(59434);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.bL,{className:(0,l.cn)("grid gap-2",r),...a,ref:t})});d.displayName=n.bL.displayName;let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.q7,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:(0,s.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});i.displayName=n.q7.displayName},47262:(e,t,r)=>{"use strict";r.d(t,{S:()=>d});var s=r(95155),a=r(12115),n=r(76981),o=r(10518),l=r(59434);let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:(0,s.jsx)(n.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})})});d.displayName=n.bL.displayName},56104:(e,t,r)=>{"use strict";r.d(t,{db:()=>d,j2:()=>l});var s=r(23915),a=r(93004),n=r(35317);let o=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyChEa5H8pa4jO2fhk5HVEGruX-5lQbZJac",authDomain:"mindfulflow-o3lmh.firebaseapp.com",projectId:"mindfulflow-o3lmh",storageBucket:"mindfulflow-o3lmh.firebasestorage.app",messagingSenderId:"1096732411136",appId:"1:1096732411136:web:ab158c0af0aef571bc5fe5",measurementId:"G-6KVVT27CNX"}),l=(0,a.xI)(o),d=(0,n.aU)(o)},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>o,aR:()=>l,wL:()=>u});var s=r(95155),a=r(12115),n=r(59434);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});i.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},68437:(e,t,r)=>{"use strict";r.d(t,{O:()=>i,c:()=>d});var s=r(95155),a=r(12115),n=r(93004),o=r(56104),l=r(35695);let d=(0,a.createContext)({user:null,loading:!0,signUp:async()=>{},signIn:async()=>{},signOut:async()=>{},sendPasswordReset:async()=>{}}),i=e=>{let{children:t}=e,[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),m=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=(0,n.hg)(o.j2,e=>{console.log("Auth state changed:",e?"User: ".concat(e.uid):"No user"),i(e),u(!1)});return()=>e()},[]);let x=async(e,t)=>{try{return await (0,n.eJ)(o.j2,e,t)}catch(e){throw console.error("Sign up error:",e),e}},h=async(e,t)=>{try{return await (0,n.x9)(o.j2,e,t)}catch(e){throw console.error("Sign in error:",e),e}},f=async()=>{await (0,n.CI)(o.j2),i(null),m.push("/auth/sign-in")},g=async e=>{try{return await (0,n.J1)(o.j2,e)}catch(e){throw console.error("Password reset error:",e),e}};return(0,s.jsx)(d.Provider,{value:{user:r,loading:c,signIn:h,signUp:x,signOut:f,sendPasswordReset:g},children:t})}},71371:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var s=r(95155),a=r(50172),n=r(25299),o=r(89829),l=r(3638),d=r(18763),i=r(77223),c=r(83540),u=r(93774),m=r(94754),x=r(96025),h=r(16238),f=r(94517),g=r(20594),p=r(12115),j=r(26126),v=r(30285),y=r(66695),b=r(47262),N=r(85057),w=r(30356),A=r(88539),E=r(87481),D=r(83963);let S=[{value:"Excellent",emoji:"\uD83D\uDE04"},{value:"Good",emoji:"\uD83D\uDE0A"},{value:"Okay",emoji:"\uD83D\uDE10"},{value:"Low",emoji:"\uD83D\uDE14"},{value:"Poor",emoji:"\uD83D\uDE22"}],k=[{value:"High"},{value:"Good"},{value:"Moderate"},{value:"Low"},{value:"Exhausted"}],T=["Work Stress","Family Time","Good Sleep","Social","Relaxed","Anxious","Grateful","Productive","Creative","Tired","Excited"],C={mood:"Good",energy:"Moderate",influences:[],notes:""};function M(){let{data:e,loading:t,addDocument:r,updateDocument:M,deleteDocument:R,hasMore:O,loadMore:F,loadingMore:I}=(0,D.j)("moodEntries",{limit:10}),[_,L]=p.useState(!1),[P,W]=p.useState(C),{toast:Z}=(0,E.dj)(),G=async()=>{if(!P.mood||!P.energy)return void Z({variant:"destructive",title:"Missing fields",description:"Please select your mood and energy level."});L(!0);try{P.id?(await M(P.id,{mood:P.mood,energy:P.energy,influences:P.influences||[],notes:P.notes||""}),Z({title:"Mood Entry Updated!"})):(await r({...P,date:new Date().toLocaleDateString()}),Z({title:"Mood Entry Saved!"})),W(C)}catch(e){Z({variant:"destructive",title:"Failed to save entry",description:"Could not save your mood entry. Please try again."})}finally{L(!1)}},H=(e,t)=>{let r=P.influences||[];t?W({...P,influences:[...r,e]}):W({...P,influences:r.filter(t=>t!==e)})},J=e=>{W(e),window.scrollTo({top:0,behavior:"smooth"})},B=async e=>{try{await R(e),Z({title:"Mood entry deleted."})}catch(e){Z({variant:"destructive",title:"Failed to delete entry"})}},U=e=>(e instanceof Date?e:e.toDate()).toLocaleString(),z=(()=>{let t=new Date,r=new Date(t);r.setDate(t.getDate()-t.getDay()),r.setHours(0,0,0,0);let s=new Date(r);return s.setDate(r.getDate()+6),s.setHours(23,59,59,999),e.filter(e=>{let t=e.createdAt instanceof Date?e.createdAt:e.createdAt.toDate();return t>=r&&t<=s})})(),V=(()=>{var t,r,s;if(0===z.length)return{avgMood:"\uD83D\uDE0A",topFactor:"N/A",streak:0};let a={Excellent:5,Good:4,Okay:3,Low:2,Poor:1},n=z.reduce((e,t)=>e+(a[t.mood]||3),0)/z.length,o=(null==(t=Object.entries(a).find(e=>{let[t,r]=e;return .5>Math.abs(r-n)}))?void 0:t[0])||"Good",l=(null==(r=S.find(e=>e.value===o))?void 0:r.emoji)||"\uD83D\uDE0A",d={};z.forEach(e=>{e.influences.forEach(e=>{d[e]=(d[e]||0)+1})});let i=(null==(s=Object.entries(d).sort((e,t)=>{let[,r]=e,[,s]=t;return s-r})[0])?void 0:s[0])||"N/A",c=[...e].sort((e,t)=>{let r=e.createdAt instanceof Date?e.createdAt:e.createdAt.toDate();return(t.createdAt instanceof Date?t.createdAt:t.createdAt.toDate()).getTime()-r.getTime()}),u=0,m=new Date;m.setHours(0,0,0,0);for(let e=0;e<c.length;e++){let t=new Date(c[e].createdAt instanceof Date?c[e].createdAt:c[e].createdAt.toDate());t.setHours(0,0,0,0);let r=new Date(m);if(r.setDate(m.getDate()-e),t.getTime()===r.getTime())u++;else break}return{avgMood:l,topFactor:i,streak:u}})();return(0,s.jsxs)("div",{className:"flex-1 space-y-6 p-4 md:p-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Mood Tracker"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Check in with your emotions to understand your mental landscape."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(y.Zp,{children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{children:P.id?"Edit Mood Entry":"How are you feeling?"})}),(0,s.jsxs)(y.Wu,{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.J,{className:"text-base",children:"Right now, my mood is..."}),(0,s.jsx)(w.z,{value:P.mood,onValueChange:e=>W({...P,mood:e}),className:"flex flex-wrap gap-4",children:S.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(w.C,{value:e.value,id:"mood-".concat(e.value.toLowerCase())}),(0,s.jsxs)(N.J,{htmlFor:"mood-".concat(e.value.toLowerCase()),className:"text-lg cursor-pointer",children:[e.emoji," ",e.value]})]},e.value))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.J,{className:"text-base",children:"My energy level is..."}),(0,s.jsx)(w.z,{value:P.energy,onValueChange:e=>W({...P,energy:e}),className:"flex flex-wrap gap-x-6 gap-y-2",children:k.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(w.C,{value:e.value,id:"energy-".concat(e.value.toLowerCase())}),(0,s.jsx)(N.J,{htmlFor:"energy-".concat(e.value.toLowerCase()),className:"font-normal cursor-pointer",children:e.value})]},e.value))})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.J,{className:"text-base",children:"What might be influencing your mood?"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:T.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(b.S,{id:e,checked:null==(t=P.influences)?void 0:t.includes(e),onCheckedChange:t=>H(e,!!t)}),(0,s.jsx)(N.J,{htmlFor:e,className:"font-normal cursor-pointer",children:e})]},e)})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(N.J,{htmlFor:"notes",className:"text-base",children:"Anything on your mind?"}),(0,s.jsx)(A.T,{id:"notes",placeholder:"Reflect on your feelings, triggers, and thoughts...",value:P.notes||"",onChange:e=>W({...P,notes:e.target.value})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(v.$,{onClick:G,disabled:_,children:[_&&(0,s.jsx)(a.A,{className:"mr-2 h-4 w-4 animate-spin"}),P.id?"Update Entry":"Save Mood Entry"]}),P.id&&(0,s.jsx)(v.$,{variant:"ghost",onClick:()=>W(C),children:"Cancel Edit"})]})]})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(y.Zp,{children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{children:"Mood This Week"})}),(0,s.jsx)(y.Wu,{className:"h-[200px]",children:0===z.length?(0,s.jsxs)("div",{className:"flex h-full flex-col items-center justify-center rounded-lg bg-muted text-center",children:[(0,s.jsx)(n.A,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"mt-2 font-semibold",children:"No Data Yet"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Log your mood for a few days to see trends."})]}):(0,s.jsx)(c.u,{width:"100%",height:"100%",children:(0,s.jsxs)(u.E,{data:(()=>{let e={Excellent:0,Good:0,Okay:0,Low:0,Poor:0};return z.forEach(t=>{e.hasOwnProperty(t.mood)&&e[t.mood]++}),Object.entries(e).map(e=>{var t;let[r,s]=e;return{mood:r,count:s,emoji:(null==(t=S.find(e=>e.value===r))?void 0:t.emoji)||"\uD83D\uDE10"}})})(),children:[(0,s.jsx)(m.d,{strokeDasharray:"3 3"}),(0,s.jsx)(x.W,{dataKey:"mood"}),(0,s.jsx)(h.h,{}),(0,s.jsx)(f.m,{formatter:(e,t,r)=>["".concat(e," entries"),"Count"]}),(0,s.jsx)(g.y,{dataKey:"count",fill:"#8884d8"})]})})})]}),(0,s.jsxs)(y.Zp,{children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{children:"Energy This Week"})}),(0,s.jsx)(y.Wu,{className:"h-[200px]",children:0===z.length?(0,s.jsxs)("div",{className:"flex h-full flex-col items-center justify-center rounded-lg bg-muted text-center",children:[(0,s.jsx)(o.A,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("p",{className:"mt-2 font-semibold",children:"No Data Yet"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Log your energy levels to see trends."})]}):(0,s.jsx)(c.u,{width:"100%",height:"100%",children:(0,s.jsxs)(u.E,{data:(()=>{let e={High:0,Good:0,Moderate:0,Low:0,Exhausted:0};return z.forEach(t=>{e.hasOwnProperty(t.energy)&&e[t.energy]++}),Object.entries(e).map(e=>{let[t,r]=e;return{energy:t,count:r}})})(),children:[(0,s.jsx)(m.d,{strokeDasharray:"3 3"}),(0,s.jsx)(x.W,{dataKey:"energy"}),(0,s.jsx)(h.h,{}),(0,s.jsx)(f.m,{formatter:(e,t,r)=>["".concat(e," entries"),"Count"]}),(0,s.jsx)(g.y,{dataKey:"count",fill:"#82ca9d"})]})})})]}),(0,s.jsxs)(y.Zp,{children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{children:"Mood Insights"})}),(0,s.jsxs)(y.Wu,{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:V.avgMood}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Avg. Mood"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-sm",children:V.topFactor}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Top Factor"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:V.streak}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]})]})]})]}),z.length>0&&(0,s.jsxs)(y.Zp,{children:[(0,s.jsxs)(y.aR,{children:[(0,s.jsx)(y.ZB,{children:"This Week's Summary"}),(0,s.jsxs)(y.BT,{children:["Insights from your ",z.length," mood entry",1!==z.length?"ies":""," this week"]})]}),(0,s.jsx)(y.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:z.length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Entries This Week"})]}),(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:V.avgMood}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average Mood"})]}),(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:V.topFactor}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most Common Factor"})]}),(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg bg-muted/50",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:V.streak}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Day Streak"})]})]})})]}),(0,s.jsxs)(y.Zp,{children:[(0,s.jsx)(y.aR,{children:(0,s.jsx)(y.ZB,{children:"Recent Mood Entries"})}),(0,s.jsx)(y.Wu,{children:t?(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,s.jsx)(a.A,{className:"h-8 w-8 animate-spin"})}):0===e.length?(0,s.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,s.jsx)(l.A,{className:"mx-auto h-12 w-12"}),(0,s.jsx)("p",{className:"mt-4 font-semibold",children:"No mood entries yet."})]}):(0,s.jsx)("ul",{className:"space-y-4",children:e.map(e=>{var t;return(0,s.jsx)("li",{className:"rounded-lg border p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:[null==(t=S.find(t=>t.value===e.mood))?void 0:t.emoji," ",e.mood," mood, ",e.energy," energy"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:U(e.createdAt)}),e.notes&&(0,s.jsxs)("p",{className:"mt-2 text-sm",children:['Notes: "',e.notes,'"']}),e.influences.length>0&&(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.influences.map(e=>(0,s.jsx)(j.E,{variant:"secondary",children:e},e))})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(v.$,{variant:"ghost",size:"icon",onClick:()=>J(e),children:(0,s.jsx)(d.A,{className:"h-4 w-4"})}),(0,s.jsx)(v.$,{variant:"ghost",size:"icon",onClick:()=>B(e.id),children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})]})]})},e.id)})})}),O&&(0,s.jsx)(y.wL,{children:(0,s.jsxs)(v.$,{onClick:F,disabled:I,className:"w-full",children:[I&&(0,s.jsx)(a.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Load More"]})})]})]})}},83963:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var s=r(12115),a=r(35317),n=r(56104),o=r(22100);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{user:r,loading:l}=(0,o.A)(),[d,i]=(0,s.useState)([]),[c,u]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1),[h,f]=(0,s.useState)(null),[g,p]=(0,s.useState)(null),[j,v]=(0,s.useState)(!0),y=(0,s.useMemo)(()=>t,[t.daily,t.limit]),b=(0,s.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return void u(!1);t?x(!0):u(!0),f(null);try{console.log("Fetching data for user:",r.uid,"path:",e);let o=[(0,a._M)("userId","==",r.uid)];if(y.daily){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());o.push((0,a._M)("createdAt",">=",a.Dc.fromDate(t)))}o.push((0,a.My)("createdAt","desc"));let l=y.limit||10;y.limit&&o.push((0,a.AB)(l)),t&&s&&o.push((0,a.HM)(s));let d=(0,a.P)((0,a.rJ)(n.db,e),...o),c=await (0,a.GG)(d),u=c.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}));console.log("Fetched ".concat(u.length," documents from ").concat(e,":"),u);let m=c.docs[c.docs.length-1]||null;p(m),v(!!y.limit&&u.length===l),t?i(e=>[...e,...u]):i(u)}catch(t){console.error("Error fetching data from",e,":",t),f(t instanceof Error?t:Error("Failed to fetch data"))}finally{u(!1),x(!1)}},[r,e,y]);(0,s.useEffect)(()=>{if(l)return void u(!0);r?(console.log("User authenticated, fetching data for path:",e),b(!1,null)):(console.log("No user, clearing data for path:",e),i([]),u(!1),v(!1),p(null),f(null))},[r,l,e]);let N=async(t,s)=>{if(!r){let e=Error("User not authenticated");throw f(e),e}let o=[...d];i(e=>e.map(e=>e.id===t?{...e,...s}:e));try{let r=(0,a.H9)(n.db,e,t);await (0,a.mZ)(r,s)}catch(e){throw f(e instanceof Error?e:Error("Failed to update document")),i(o),e}},w=async t=>{if(!r){let e=Error("User not authenticated");throw f(e),e}let s=[...d];i(e=>e.filter(e=>e.id!==t));try{await (0,a.kd)((0,a.H9)(n.db,e,t))}catch(e){throw f(e instanceof Error?e:Error("Failed to delete document")),i(s),e}};return{data:d,loading:c,error:h,addDocument:async t=>{if(!r){let e=Error("User not authenticated");throw f(e),e}let s="temp_".concat(Date.now()),o={id:s,...t,userId:r.uid,createdAt:new Date};i(e=>[o,...e].sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));try{let o=await (0,a.gS)((0,a.rJ)(n.db,e),{...t,userId:r.uid,createdAt:a.Dc.now()});return i(e=>e.map(e=>e.id===s?{...e,id:o.id}:e)),o.id}catch(e){throw f(e instanceof Error?e:Error("Failed to add document")),i(e=>e.filter(e=>e.id!==s)),e}},updateDocument:N,deleteDocument:w,refetch:()=>b(!1,null),loadMore:()=>{j&&!m&&b(!0,g)},hasMore:j,loadingMore:m}}},85057:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var s=r(95155),a=r(12115),n=r(40968),o=r(74466),l=r(59434);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(d(),r),...a})});i.displayName=n.b.displayName},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var s=r(12115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],i={toasts:[]};function c(e){i=l(i,e),d.forEach(e=>{e(i)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(i);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var s=r(95155),a=r(12115),n=r(59434);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});o.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,8198,2127,4052,8022,5604,8979,8441,1684,7358],()=>t(9757)),_N_E=e.O()}]);