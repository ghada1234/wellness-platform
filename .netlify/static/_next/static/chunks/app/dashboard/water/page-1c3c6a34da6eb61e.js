(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8497],{3638:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},6101:(e,t,a)=>{"use strict";a.d(t,{s:()=>n,t:()=>l});var r=a(12115);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let a=!1,r=e.map(e=>{let r=s(e,t);return a||"function"!=typeof r||(a=!0),r});if(a)return()=>{for(let t=0;t<r.length;t++){let a=r[t];"function"==typeof a?a():s(e[t],null)}}}}function n(...e){return r.useCallback(l(...e),e)}},9375:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(95155),s=a(50172),l=a(28681),n=a(18763),i=a(3638),o=a(77223),d=a(12115),c=a(62177),u=a(90221),f=a(70927),m=a(66695),h=a(30285),g=a(62523),p=a(17759),x=a(87481),y=a(83963),v=a(48392);let j=f.Ik({glasses:f.au.number().min(0,"Must be a positive number"),goal:f.au.number().min(1,"Goal must be at least 1"),date:f.Yj().nonempty("Date is required")}),w=()=>new Date().toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"});function b(){let{data:e,loading:t,addDocument:a,updateDocument:f,deleteDocument:b}=(0,y.j)("waterIntake",{limit:50}),{waterIntake:N,updateWaterGoal:S,updateWaterIntake:A}=(0,v.f)(),[E,k]=d.useState(!1),[I,C]=d.useState(null),{toast:D}=(0,x.dj)(),R=(0,c.mN)({resolver:(0,u.u)(j),defaultValues:{glasses:N.glasses,goal:N.goal,date:w()}});d.useEffect(()=>{I?R.reset({glasses:I.glasses,goal:I.goal,date:I.date}):R.reset({glasses:N.glasses,goal:N.goal,date:w()})},[I,R,N]);let T=async e=>{k(!0);try{A(e.glasses),e.goal!==N.goal&&await S(e.goal),D({title:"Water log saved!"}),R.reset({glasses:8,goal:N.goal,date:w()})}catch(e){D({variant:"destructive",title:"Failed to save",description:"Could not save the water log. Please try again."})}finally{k(!1)}},M=e=>{C(e)},F=async e=>{try{await b(e),D({title:"Water log deleted."})}catch(e){D({variant:"destructive",title:"Failed to delete log"})}};return(0,r.jsxs)("div",{className:"flex-1 space-y-6 p-4 md:p-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Water Log"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Track and manage your daily water intake history."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(m.Zp,{children:(0,r.jsx)(p.lV,{...R,children:(0,r.jsxs)("form",{onSubmit:R.handleSubmit(T),children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{children:I?"Edit Entry":"Add New Entry"})}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:[(0,r.jsx)(p.zB,{control:R.control,name:"glasses",render:e=>{let{field:t}=e;return(0,r.jsxs)(p.eI,{children:[(0,r.jsx)(p.lR,{children:"Glasses of Water"}),(0,r.jsx)(p.MJ,{children:(0,r.jsx)(g.p,{type:"number",...t})}),(0,r.jsx)(p.C5,{})]})}}),(0,r.jsx)(p.zB,{control:R.control,name:"goal",render:e=>{let{field:t}=e;return(0,r.jsxs)(p.eI,{children:[(0,r.jsx)(p.lR,{children:"Daily Goal (Glasses)"}),(0,r.jsx)(p.MJ,{children:(0,r.jsx)(g.p,{type:"number",...t})}),(0,r.jsx)(p.C5,{})]})}}),(0,r.jsx)(p.zB,{control:R.control,name:"date",render:e=>{let{field:t}=e;return(0,r.jsxs)(p.eI,{children:[(0,r.jsx)(p.lR,{children:"Date"}),(0,r.jsx)(p.MJ,{children:(0,r.jsx)(g.p,{type:"text",placeholder:"e.g., 7/25/2024",...t})}),(0,r.jsx)(p.C5,{})]})}})]}),(0,r.jsxs)(m.wL,{className:"flex justify-between",children:[(0,r.jsxs)(h.$,{type:"submit",disabled:E,children:[E&&(0,r.jsx)(s.A,{className:"mr-2 h-4 w-4 animate-spin"}),I?"Save Changes":"Add Entry"]}),I&&(0,r.jsx)(h.$,{variant:"ghost",onClick:()=>C(null),children:"Cancel"})]})]})})})}),(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(m.Zp,{children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsxs)(m.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-5 w-5"}),"Today's Water Goal"]}),(0,r.jsxs)(m.BT,{children:["Current goal: ",N.goal," glasses per day"]})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Progress"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[N.glasses," / ",N.goal," glasses"]})]}),(0,r.jsx)("div",{className:"w-full bg-secondary rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(N.glasses/N.goal*100,100),"%")}})})]}),(0,r.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{let e=prompt("Enter new daily water goal (glasses):",N.goal.toString());e&&!isNaN(parseInt(e))&&parseInt(e)>=1&&20>=parseInt(e)?(S(parseInt(e)),D({title:"Goal Updated!",description:"Your daily water goal is now ".concat(e," glasses.")})):e&&D({variant:"destructive",title:"Invalid Goal",description:"Please enter a number between 1 and 20."})},children:[(0,r.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Update Goal"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>A(N.glasses+1),disabled:N.glasses>=N.goal,children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"+1 Glass"]}),(0,r.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>A(N.glasses+2),disabled:N.glasses>=N.goal-1,children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"+2 Glasses"]}),(0,r.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{let e=prompt("Enter number of glasses to add:","1");e&&!isNaN(parseInt(e))&&parseInt(e)>0&&A(N.glasses+parseInt(e))},children:[(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Custom"]})]})]})})]}),(0,r.jsxs)(m.Zp,{children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{children:"History"})}),(0,r.jsx)(m.Wu,{children:t?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)(s.A,{className:"h-8 w-8 animate-spin"})}):0===e.length?(0,r.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,r.jsx)(i.A,{className:"mx-auto h-12 w-12"}),(0,r.jsx)("p",{className:"mt-4 font-semibold",children:"No water intake logged yet."}),(0,r.jsx)("p",{className:"text-sm",children:"Go to the Nutrition page to track your water today."})]}):(0,r.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(l.A,{className:"h-6 w-6 text-blue-500"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold",children:[e.glasses," / ",e.goal," glasses"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.date})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>M(e),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}),(0,r.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>F(e.id),children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})]})]},e.id))})})]})]})]})]})}},17759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>x,MJ:()=>p,eI:()=>h,lR:()=>g,lV:()=>d,zB:()=>u});var r=a(95155),s=a(12115),l=a(66634),n=a(62177),i=a(59434),o=a(85057);let d=n.Op,c=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(n.xI,{...t})})},f=()=>{let e=s.useContext(c),t=s.useContext(m),{getFieldState:a,formState:r}=(0,n.xW)(),l=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},m=s.createContext({}),h=s.forwardRef((e,t)=>{let{className:a,...l}=e,n=s.useId();return(0,r.jsx)(m.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",a),...l})})});h.displayName="FormItem";let g=s.forwardRef((e,t)=>{let{className:a,...s}=e,{error:l,formItemId:n}=f();return(0,r.jsx)(o.J,{ref:t,className:(0,i.cn)(l&&"text-destructive",a),htmlFor:n,...s})});g.displayName="FormLabel";let p=s.forwardRef((e,t)=>{let{...a}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:o}=f();return(0,r.jsx)(l.DX,{ref:t,id:n,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...a})});p.displayName="FormControl",s.forwardRef((e,t)=>{let{className:a,...s}=e,{formDescriptionId:l}=f();return(0,r.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})}).displayName="FormDescription";let x=s.forwardRef((e,t)=>{var a;let{className:s,children:l,...n}=e,{error:o,formMessageId:d}=f(),c=o?String(null!=(a=null==o?void 0:o.message)?a:""):l;return c?(0,r.jsx)("p",{ref:t,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});x.displayName="FormMessage"},18763:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},22100:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(12115),s=a(68437);let l=()=>(0,r.useContext)(s.c)},28681:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(95155),s=a(12115),l=a(66634),n=a(74466),i=a(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},48392:(e,t,a)=>{"use strict";a.d(t,{f:()=>o});var r=a(12115),s=a(35317),l=a(56104),n=a(22100);let i=()=>{let e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)},o=()=>{let{user:e}=(0,n.A)(),[t,a]=(0,r.useState)({glasses:0,goal:8}),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[f,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),g=i(),p=(0,r.useCallback)(async()=>{if(!e)return void d(!1);d(!0),u(null);try{let t=(0,s.H9)(l.db,"waterIntake","".concat(e.uid,"_").concat(g)),r=await (0,s.x7)(t);if(r.exists()){let e=r.data();a({glasses:e.glasses,goal:e.goal}),m(!0)}else a({glasses:0,goal:8}),m(!1)}catch(e){u(e instanceof Error?e:Error("Failed to fetch water intake"))}finally{d(!1)}},[e,g]);(0,r.useEffect)(()=>{p()},[p]);let x=(0,r.useCallback)(async(t,a)=>{if(!e)return void u(Error("User not authenticated"));try{let r=(0,s.H9)(l.db,"waterIntake","".concat(e.uid,"_").concat(g));if(f){let e={glasses:t,updatedAt:s.Dc.now()};void 0!==a&&(e.goal=a),await (0,s.mZ)(r,e)}else{let l={id:g,userId:e.uid,glasses:t,goal:a||8,date:g,createdAt:s.Dc.now(),updatedAt:s.Dc.now()};await (0,s.BN)(r,l),m(!0)}u(null)}catch(e){u(e instanceof Error?e:Error("Failed to update water intake"))}},[e,g,f]),y=async r=>{if(!e)return void u(Error("User not authenticated"));try{a(e=>({...e,goal:r})),await x(t.glasses,r)}catch(e){u(e instanceof Error?e:Error("Failed to update water goal"))}};return(0,r.useEffect)(()=>()=>{h.current&&clearTimeout(h.current)},[]),{waterIntake:t,loading:o,error:c,updateWaterIntake:t=>{if(!e)return void u(Error("User not authenticated"));a(e=>({...e,glasses:t})),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{x(t)},1500)},updateWaterGoal:y}}},55361:(e,t,a)=>{Promise.resolve().then(a.bind(a,9375))},56104:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j2:()=>i});var r=a(23915),s=a(93004),l=a(35317);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyChEa5H8pa4jO2fhk5HVEGruX-5lQbZJac",authDomain:"mindfulflow-o3lmh.firebaseapp.com",projectId:"mindfulflow-o3lmh",storageBucket:"mindfulflow-o3lmh.firebasestorage.app",messagingSenderId:"1096732411136",appId:"1:1096732411136:web:ab158c0af0aef571bc5fe5",measurementId:"G-6KVVT27CNX"}),i=(0,s.xI)(n),o=(0,l.aU)(n)},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(52596),s=a(39688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(95155),s=a(12115),l=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},63540:(e,t,a)=>{"use strict";a.d(t,{sG:()=>u,hO:()=>f});var r=a(12115),s=a(47650),l=a(6101),n=a(95155),i=r.forwardRef((e,t)=>{let{children:a,...s}=e,l=r.Children.toArray(a),i=l.find(c);if(i){let e=i.props.children,a=l.map(t=>t!==i?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,n.jsx)(o,{...s,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,n.jsx)(o,{...s,ref:t,children:a})});i.displayName="Slot";var o=r.forwardRef((e,t)=>{let{children:a,...s}=e;if(r.isValidElement(a)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(a),n=function(e,t){let a={...t};for(let r in t){let s=e[r],l=t[r];/^on[A-Z]/.test(r)?s&&l?a[r]=(...e)=>{l(...e),s(...e)}:s&&(a[r]=s):"style"===r?a[r]={...s,...l}:"className"===r&&(a[r]=[s,l].filter(Boolean).join(" "))}return{...e,...a}}(s,a.props);return a.type!==r.Fragment&&(n.ref=t?(0,l.t)(t,e):e),r.cloneElement(a,n)}return r.Children.count(a)>1?r.Children.only(null):null});o.displayName="SlotClone";var d=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function c(e){return r.isValidElement(e)&&e.type===d}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let a=r.forwardRef((e,a)=>{let{asChild:r,...s}=e,l=r?i:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...s,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function f(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>u});var r=a(95155),s=a(12115),l=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},68437:(e,t,a)=>{"use strict";a.d(t,{O:()=>d,c:()=>o});var r=a(95155),s=a(12115),l=a(93004),n=a(56104),i=a(35695);let o=(0,s.createContext)({user:null,loading:!0,signUp:async()=>{},signIn:async()=>{},signOut:async()=>{},sendPasswordReset:async()=>{}}),d=e=>{let{children:t}=e,[a,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),f=(0,i.useRouter)();(0,s.useEffect)(()=>{let e=(0,l.hg)(n.j2,e=>{console.log("Auth state changed:",e?"User: ".concat(e.uid):"No user"),d(e),u(!1)});return()=>e()},[]);let m=async(e,t)=>{try{return await (0,l.eJ)(n.j2,e,t)}catch(e){throw console.error("Sign up error:",e),e}},h=async(e,t)=>{try{return await (0,l.x9)(n.j2,e,t)}catch(e){throw console.error("Sign in error:",e),e}},g=async()=>{await (0,l.CI)(n.j2),d(null),f.push("/auth/sign-in")},p=async e=>{try{return await (0,l.J1)(n.j2,e)}catch(e){throw console.error("Password reset error:",e),e}};return(0,r.jsx)(o.Provider,{value:{user:a,loading:c,signIn:h,signUp:m,signOut:g,sendPasswordReset:p},children:t})}},77223:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},83963:(e,t,a)=>{"use strict";a.d(t,{j:()=>i});var r=a(12115),s=a(35317),l=a(56104),n=a(22100);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{user:a,loading:i}=(0,n.A)(),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[f,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),[y,v]=(0,r.useState)(!0),j=(0,r.useMemo)(()=>t,[t.daily,t.limit]),w=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!a)return void u(!1);t?m(!0):u(!0),g(null);try{console.log("Fetching data for user:",a.uid,"path:",e);let n=[(0,s._M)("userId","==",a.uid)];if(j.daily){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.push((0,s._M)("createdAt",">=",s.Dc.fromDate(t)))}n.push((0,s.My)("createdAt","desc"));let i=j.limit||10;j.limit&&n.push((0,s.AB)(i)),t&&r&&n.push((0,s.HM)(r));let o=(0,s.P)((0,s.rJ)(l.db,e),...n),c=await (0,s.GG)(o),u=c.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}));console.log("Fetched ".concat(u.length," documents from ").concat(e,":"),u);let f=c.docs[c.docs.length-1]||null;x(f),v(!!j.limit&&u.length===i),t?d(e=>[...e,...u]):d(u)}catch(t){console.error("Error fetching data from",e,":",t),g(t instanceof Error?t:Error("Failed to fetch data"))}finally{u(!1),m(!1)}},[a,e,j]);(0,r.useEffect)(()=>{if(i)return void u(!0);a?(console.log("User authenticated, fetching data for path:",e),w(!1,null)):(console.log("No user, clearing data for path:",e),d([]),u(!1),v(!1),x(null),g(null))},[a,i,e]);let b=async(t,r)=>{if(!a){let e=Error("User not authenticated");throw g(e),e}let n=[...o];d(e=>e.map(e=>e.id===t?{...e,...r}:e));try{let a=(0,s.H9)(l.db,e,t);await (0,s.mZ)(a,r)}catch(e){throw g(e instanceof Error?e:Error("Failed to update document")),d(n),e}},N=async t=>{if(!a){let e=Error("User not authenticated");throw g(e),e}let r=[...o];d(e=>e.filter(e=>e.id!==t));try{await (0,s.kd)((0,s.H9)(l.db,e,t))}catch(e){throw g(e instanceof Error?e:Error("Failed to delete document")),d(r),e}};return{data:o,loading:c,error:h,addDocument:async t=>{if(!a){let e=Error("User not authenticated");throw g(e),e}let r="temp_".concat(Date.now()),n={id:r,...t,userId:a.uid,createdAt:new Date};d(e=>[n,...e].sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));try{let n=await (0,s.gS)((0,s.rJ)(l.db,e),{...t,userId:a.uid,createdAt:s.Dc.now()});return d(e=>e.map(e=>e.id===r?{...e,id:n.id}:e)),n.id}catch(e){throw g(e instanceof Error?e:Error("Failed to add document")),d(e=>e.filter(e=>e.id!==r)),e}},updateDocument:b,deleteDocument:N,refetch:()=>w(!1,null),loadMore:()=>{y&&!f&&w(!0,p)},hasMore:y,loadingMore:f}}},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var r=a(95155),s=a(12115),l=a(40968),n=a(74466),i=a(59434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,i.cn)(o(),a),...s})});d.displayName=l.b.displayName},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var r=a(12115);let s=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,8198,2127,5075,8441,1684,7358],()=>t(55361)),_N_E=e.O()}]);