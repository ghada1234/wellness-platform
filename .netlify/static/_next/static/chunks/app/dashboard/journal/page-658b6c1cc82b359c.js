(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{3638:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},12023:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},17313:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var r=a(95155),s=a(12115),n=a(60704),i=a(59434);let l=n.bL,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});o.displayName=n.B8.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});d.displayName=n.l9.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=n.UC.displayName},18763:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},22100:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(12115),s=a(68437);let n=()=>(0,r.useContext)(s.c)},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var r=a(95155),s=a(12115),n=a(66634),i=a(74466),l=a(59434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:t,...c})});d.displayName="Button"},34301:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},50172:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},56104:(e,t,a)=>{"use strict";a.d(t,{db:()=>o,j2:()=>l});var r=a(23915),s=a(93004),n=a(35317);let i=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyChEa5H8pa4jO2fhk5HVEGruX-5lQbZJac",authDomain:"mindfulflow-o3lmh.firebaseapp.com",projectId:"mindfulflow-o3lmh",storageBucket:"mindfulflow-o3lmh.firebasestorage.app",messagingSenderId:"1096732411136",appId:"1:1096732411136:web:ab158c0af0aef571bc5fe5",measurementId:"G-6KVVT27CNX"}),l=(0,s.xI)(i),o=(0,n.aU)(i)},58239:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(95155),s=a(34301),n=a(3638),i=a(50172),l=a(12023),o=a(18763),d=a(77223),c=a(74601),u=a(12115),h=a(30285),f=a(66695),m=a(17313),p=a(88539),x=a(87481),g=a(83963);let y=["What's one small thing that brought you joy today?","Describe a challenge you faced and how you grew from it.","Who are you most grateful for in your life right now, and why?","If you could give your past self one piece of advice, what would it be?"];function v(){let{data:e,loading:t,addDocument:a,updateDocument:v,deleteDocument:j,hasMore:b,loadMore:w,loadingMore:N}=(0,g.j)("journalLog",{limit:10}),[A,k]=u.useState(""),[D,S]=u.useState(null),[E,T]=u.useState("new-entry"),[C,M]=u.useState(!1),{toast:R}=(0,x.dj)(),I=async()=>{if(!A.trim())return void R({variant:"destructive",title:"Entry is empty",description:"Please write something before saving."});M(!0);try{D?(await v(D.id,{content:A}),R({title:"Journal entry updated!"}),S(null)):(await a({content:A}),R({title:"Journal entry saved!"})),k(""),T("recent-entries")}catch(e){R({variant:"destructive",title:"Failed to save",description:"Could not save the journal entry. Please try again."})}finally{M(!1)}},_=e=>{S(e),k(e.content),T("new-entry")},O=async e=>{try{await j(e),R({title:"Journal entry deleted."})}catch(e){R({variant:"destructive",title:"Failed to delete",description:"Could not delete the journal entry. Please try again."})}},L=e=>{k(t=>t?"".concat(t,"\n\n").concat(e):e),T("new-entry")},P=e=>e instanceof Date?e.toLocaleString():e.toDate().toLocaleString(),B=u.useMemo(()=>{if(0===e.length)return 0;let t=[...e].sort((e,t)=>{let a=e.createdAt instanceof Date?e.createdAt:e.createdAt.toDate();return(t.createdAt instanceof Date?t.createdAt:t.createdAt.toDate()).getTime()-a.getTime()}),a=0,r=new Set;t.forEach(e=>{let t=e.createdAt instanceof Date?e.createdAt:e.createdAt.toDate();r.add(t.toDateString())});let s=Array.from(r).map(e=>new Date(e)).sort((e,t)=>t.getTime()-e.getTime());if(0===s.length)return 0;let n=new Date,i=new Date;if(i.setDate(n.getDate()-1),s[0].toDateString()!==n.toDateString()&&s[0].toDateString()!==i.toDateString())return 0;a=1;for(let e=0;e<s.length-1;e++){let t=s[e],r=s[e+1];if((t.getTime()-r.getTime())/864e5<=1)a++;else break}return a},[e]);return(0,r.jsxs)("div",{className:"flex-1 space-y-6 p-4 md:p-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Your Private Journal"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"A safe space to reflect, explore your thoughts, and track your mental journey."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)(m.tU,{value:E,onValueChange:T,defaultValue:"new-entry",children:[(0,r.jsxs)(m.j7,{children:[(0,r.jsxs)(m.Xi,{value:"new-entry",children:[(0,r.jsx)(s.A,{className:"mr-2 h-4 w-4"}),D?"Edit Entry":"New Entry"]}),(0,r.jsxs)(m.Xi,{value:"recent-entries",children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Recent Entries"]})]}),(0,r.jsx)(m.av,{value:"new-entry",children:(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.Wu,{className:"pt-6",children:(0,r.jsx)(p.T,{placeholder:"What's on your mind?",className:"min-h-[250px] text-base md:min-h-[400px]",value:A,onChange:e=>k(e.target.value)})}),(0,r.jsxs)(f.wL,{className:"justify-between",children:[(0,r.jsxs)(h.$,{onClick:I,disabled:C,children:[C&&(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),D?"Update Entry":"Save Entry"]}),D&&(0,r.jsx)(h.$,{variant:"ghost",onClick:()=>{S(null),k("")},children:"Cancel Edit"})]})]})}),(0,r.jsx)(m.av,{value:"recent-entries",children:(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.ZB,{children:"Recent Entries"})}),(0,r.jsx)(f.Wu,{children:t?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)(i.A,{className:"h-8 w-8 animate-spin"})}):0===e.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/30 p-12 text-center",children:[(0,r.jsx)(l.A,{className:"h-12 w-12 text-muted-foreground"}),(0,r.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"Your journal is empty."}),(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Why not write about something you're grateful for today?"}),(0,r.jsx)(h.$,{className:"mt-6",onClick:()=>T("new-entry"),children:"Write your first entry"})]}):(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.BT,{children:P(e.createdAt)})}),(0,r.jsx)(f.Wu,{children:(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})}),(0,r.jsxs)(f.wL,{className:"gap-2",children:[(0,r.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>_(e),children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,r.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>O(e.id),children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]},e.id))})}),b&&(0,r.jsx)(f.wL,{children:(0,r.jsxs)(h.$,{onClick:w,disabled:N,className:"w-full",children:[N&&(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Load More"]})})]})})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.ZB,{children:"Reflection Prompts"})}),(0,r.jsx)(f.Wu,{className:"space-y-4",children:y.map((e,t)=>(0,r.jsxs)("div",{className:"rounded-lg border p-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("p",{children:["“",e,"”"]}),(0,r.jsx)(h.$,{variant:"link",className:"p-0 h-auto mt-2",onClick:()=>L(e),children:"Write about this"})]},t))})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.ZB,{children:"Insights"})}),(0,r.jsxs)(f.Wu,{className:"grid grid-cols-2 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-3xl font-bold",children:e.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Entries"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-3xl font-bold",children:B}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsxs)(f.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"h-5 w-5 text-primary"}),"AI-Powered Analysis"]})}),(0,r.jsxs)(f.Wu,{className:"flex flex-col items-center justify-center text-center",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Write a few entries and your AI-powered insights will appear here."}),(0,r.jsx)(h.$,{variant:"secondary",className:"mt-4",disabled:e.length<3,children:"Analyze My Journal"})]})]}),(0,r.jsxs)(f.Zp,{children:[(0,r.jsx)(f.aR,{children:(0,r.jsx)(f.ZB,{children:"Achievements"})}),(0,r.jsxs)(f.Wu,{className:"space-y-2 text-sm text-muted-foreground",children:[(0,r.jsx)("p",{children:"✨ Consistent Growth Mindset"}),(0,r.jsx)("p",{children:"\uD83D\uDC96 Gratitude as a Recurring Theme"})]})]})]})]})]})}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},60704:(e,t,a)=>{"use strict";a.d(t,{B8:()=>T,UC:()=>M,bL:()=>E,l9:()=>C});var r=a(12115),s=a(85185),n=a(46081),i=a(89196),l=a(28905),o=a(63540),d=a(94315),c=a(5845),u=a(61285),h=a(95155),f="Tabs",[m,p]=(0,n.A)(f,[i.RG]),x=(0,i.RG)(),[g,y]=m(f),v=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,onValueChange:s,defaultValue:n,orientation:i="horizontal",dir:l,activationMode:f="automatic",...m}=e,p=(0,d.jH)(l),[x,y]=(0,c.i)({prop:r,onChange:s,defaultProp:n});return(0,h.jsx)(g,{scope:a,baseId:(0,u.B)(),value:x,onValueChange:y,orientation:i,dir:p,activationMode:f,children:(0,h.jsx)(o.sG.div,{dir:p,"data-orientation":i,...m,ref:t})})});v.displayName=f;var j="TabsList",b=r.forwardRef((e,t)=>{let{__scopeTabs:a,loop:r=!0,...s}=e,n=y(j,a),l=x(a);return(0,h.jsx)(i.bL,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:(0,h.jsx)(o.sG.div,{role:"tablist","aria-orientation":n.orientation,...s,ref:t})})});b.displayName=j;var w="TabsTrigger",N=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,disabled:n=!1,...l}=e,d=y(w,a),c=x(a),u=D(d.baseId,r),f=S(d.baseId,r),m=r===d.value;return(0,h.jsx)(i.q7,{asChild:!0,...c,focusable:!n,active:m,children:(0,h.jsx)(o.sG.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:t,onMouseDown:(0,s.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(r)}),onKeyDown:(0,s.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(r)}),onFocus:(0,s.m)(e.onFocus,()=>{let e="manual"!==d.activationMode;m||n||!e||d.onValueChange(r)})})})});N.displayName=w;var A="TabsContent",k=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,forceMount:n,children:i,...d}=e,c=y(A,a),u=D(c.baseId,s),f=S(c.baseId,s),m=s===c.value,p=r.useRef(m);return r.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(l.C,{present:n||m,children:a=>{let{present:r}=a;return(0,h.jsx)(o.sG.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:f,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&i})}})});function D(e,t){return"".concat(e,"-trigger-").concat(t)}function S(e,t){return"".concat(e,"-content-").concat(t)}k.displayName=A;var E=v,T=b,C=N,M=k},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var r=a(95155),s=a(12115),n=a(59434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},68437:(e,t,a)=>{"use strict";a.d(t,{O:()=>d,c:()=>o});var r=a(95155),s=a(12115),n=a(93004),i=a(56104),l=a(35695);let o=(0,s.createContext)({user:null,loading:!0,signUp:async()=>{},signIn:async()=>{},signOut:async()=>{},sendPasswordReset:async()=>{}}),d=e=>{let{children:t}=e,[a,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),h=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=(0,n.hg)(i.j2,e=>{console.log("Auth state changed:",e?"User: ".concat(e.uid):"No user"),d(e),u(!1)});return()=>e()},[]);let f=async(e,t)=>{try{return await (0,n.eJ)(i.j2,e,t)}catch(e){throw console.error("Sign up error:",e),e}},m=async(e,t)=>{try{return await (0,n.x9)(i.j2,e,t)}catch(e){throw console.error("Sign in error:",e),e}},p=async()=>{await (0,n.CI)(i.j2),d(null),h.push("/auth/sign-in")},x=async e=>{try{return await (0,n.J1)(i.j2,e)}catch(e){throw console.error("Password reset error:",e),e}};return(0,r.jsx)(o.Provider,{value:{user:a,loading:c,signIn:m,signUp:f,signOut:p,sendPasswordReset:x},children:t})}},68545:(e,t,a)=>{Promise.resolve().then(a.bind(a,58239))},74601:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},77223:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},83963:(e,t,a)=>{"use strict";a.d(t,{j:()=>l});var r=a(12115),s=a(35317),n=a(56104),i=a(22100);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{user:a,loading:l}=(0,i.A)(),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!0),[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)(null),[y,v]=(0,r.useState)(!0),j=(0,r.useMemo)(()=>t,[t.daily,t.limit]),b=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!a)return void u(!1);t?f(!0):u(!0),p(null);try{console.log("Fetching data for user:",a.uid,"path:",e);let i=[(0,s._M)("userId","==",a.uid)];if(j.daily){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());i.push((0,s._M)("createdAt",">=",s.Dc.fromDate(t)))}i.push((0,s.My)("createdAt","desc"));let l=j.limit||10;j.limit&&i.push((0,s.AB)(l)),t&&r&&i.push((0,s.HM)(r));let o=(0,s.P)((0,s.rJ)(n.db,e),...i),c=await (0,s.GG)(o),u=c.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}));console.log("Fetched ".concat(u.length," documents from ").concat(e,":"),u);let h=c.docs[c.docs.length-1]||null;g(h),v(!!j.limit&&u.length===l),t?d(e=>[...e,...u]):d(u)}catch(t){console.error("Error fetching data from",e,":",t),p(t instanceof Error?t:Error("Failed to fetch data"))}finally{u(!1),f(!1)}},[a,e,j]);(0,r.useEffect)(()=>{if(l)return void u(!0);a?(console.log("User authenticated, fetching data for path:",e),b(!1,null)):(console.log("No user, clearing data for path:",e),d([]),u(!1),v(!1),g(null),p(null))},[a,l,e]);let w=async(t,r)=>{if(!a){let e=Error("User not authenticated");throw p(e),e}let i=[...o];d(e=>e.map(e=>e.id===t?{...e,...r}:e));try{let a=(0,s.H9)(n.db,e,t);await (0,s.mZ)(a,r)}catch(e){throw p(e instanceof Error?e:Error("Failed to update document")),d(i),e}},N=async t=>{if(!a){let e=Error("User not authenticated");throw p(e),e}let r=[...o];d(e=>e.filter(e=>e.id!==t));try{await (0,s.kd)((0,s.H9)(n.db,e,t))}catch(e){throw p(e instanceof Error?e:Error("Failed to delete document")),d(r),e}};return{data:o,loading:c,error:m,addDocument:async t=>{if(!a){let e=Error("User not authenticated");throw p(e),e}let r="temp_".concat(Date.now()),i={id:r,...t,userId:a.uid,createdAt:new Date};d(e=>[i,...e].sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));try{let i=await (0,s.gS)((0,s.rJ)(n.db,e),{...t,userId:a.uid,createdAt:s.Dc.now()});return d(e=>e.map(e=>e.id===r?{...e,id:i.id}:e)),i.id}catch(e){throw p(e instanceof Error?e:Error("Failed to add document")),d(e=>e.filter(e=>e.id!==r)),e}},updateDocument:w,deleteDocument:N,refetch:()=>b(!1,null),loadMore:()=>{y&&!h&&b(!0,x)},hasMore:y,loadingMore:h}}},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>h});var r=a(12115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function h(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(95155),s=a(12115),n=a(59434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});i.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,8198,2127,4052,8441,1684,7358],()=>t(68545)),_N_E=e.O()}]);