"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2011],{22100:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(12115),n=r(68437);let o=()=>(0,a.useContext)(n.c)},30285:(e,t,r)=>{r.d(t,{$:()=>i});var a=r(95155),n=r(12115),o=r(66634),s=r(74466),l=r(59434);let d=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:i=!1,...c}=e,u=i?o.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:n,size:s,className:r})),ref:t,...c})});i.displayName="Button"},56104:(e,t,r)=>{r.d(t,{db:()=>d,j2:()=>l});var a=r(23915),n=r(93004),o=r(35317);let s=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyChEa5H8pa4jO2fhk5HVEGruX-5lQbZJac",authDomain:"mindfulflow-o3lmh.firebaseapp.com",projectId:"mindfulflow-o3lmh",storageBucket:"mindfulflow-o3lmh.firebasestorage.app",messagingSenderId:"1096732411136",appId:"1:1096732411136:web:ab158c0af0aef571bc5fe5",measurementId:"G-6KVVT27CNX"}),l=(0,n.xI)(s),d=(0,o.aU)(s)},59434:(e,t,r)=>{r.d(t,{cn:()=>o});var a=r(52596),n=r(39688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},66695:(e,t,r)=>{r.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>s,aR:()=>l,wL:()=>u});var a=r(95155),n=r(12115),o=r(59434);let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});s.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...n})});i.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},68437:(e,t,r)=>{r.d(t,{O:()=>i,c:()=>d});var a=r(95155),n=r(12115),o=r(93004),s=r(56104),l=r(35695);let d=(0,n.createContext)({user:null,loading:!0,signUp:async()=>{},signIn:async()=>{},signOut:async()=>{},sendPasswordReset:async()=>{}}),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),f=(0,l.useRouter)();(0,n.useEffect)(()=>{let e=(0,o.hg)(s.j2,e=>{console.log("Auth state changed:",e?"User: ".concat(e.uid):"No user"),i(e),u(!1)});return()=>e()},[]);let h=async(e,t)=>{try{return await (0,o.eJ)(s.j2,e,t)}catch(e){throw console.error("Sign up error:",e),e}},m=async(e,t)=>{try{return await (0,o.x9)(s.j2,e,t)}catch(e){throw console.error("Sign in error:",e),e}},g=async()=>{await (0,o.CI)(s.j2),i(null),f.push("/auth/sign-in")},p=async e=>{try{return await (0,o.J1)(s.j2,e)}catch(e){throw console.error("Password reset error:",e),e}};return(0,a.jsx)(d.Provider,{value:{user:r,loading:c,signIn:m,signUp:h,signOut:g,sendPasswordReset:p},children:t})}},81499:(e,t,r)=>{r.d(t,{Hm:()=>v,II:()=>m,Nt:()=>g,_3:()=>p,at:()=>f});var a=r(95155),n=r(12115),o=r(83540),s=r(94517),l=r(24026),d=r(59434);let i={light:"",dark:".dark"},c=n.createContext(null);function u(){let e=n.useContext(c);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let f=n.forwardRef((e,t)=>{let{id:r,className:s,children:l,config:i,...u}=e,f=n.useId(),m="chart-".concat(r||f.replace(/:/g,""));return(0,a.jsx)(c.Provider,{value:{config:i},children:(0,a.jsxs)("div",{"data-chart":m,ref:t,className:(0,d.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",s),...u,children:[(0,a.jsx)(h,{id:m,config:i}),(0,a.jsx)(o.u,{children:l})]})})});f.displayName="Chart";let h=e=>{let{id:t,config:r}=e,n=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(i).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[a,n]=e,o=(null==(t=n.theme)?void 0:t[r])||n.color;return o?"  --color-".concat(a,": ").concat(o,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},m=s.m,g=n.forwardRef((e,t)=>{let{active:r,payload:o,className:s,indicator:l="dot",hideLabel:i=!1,hideIndicator:c=!1,label:f,labelFormatter:h,labelClassName:m,formatter:g,color:p,nameKey:v,labelKey:x}=e,{config:b}=u(),w=n.useMemo(()=>{var e;if(i||!(null==o?void 0:o.length))return null;let[t]=o,r="".concat(x||t.dataKey||t.name||"value"),n=y(b,t,r),s=x||"string"!=typeof f?null==n?void 0:n.label:(null==(e=b[f])?void 0:e.label)||f;return h?(0,a.jsx)("div",{className:(0,d.cn)("font-medium",m),children:h(s,o)}):s?(0,a.jsx)("div",{className:(0,d.cn)("font-medium",m),children:s}):null},[f,h,o,i,m,b,x]);if(!r||!(null==o?void 0:o.length))return null;let j=1===o.length&&"dot"!==l;return(0,a.jsxs)("div",{ref:t,className:(0,d.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[j?null:w,(0,a.jsx)("div",{className:"grid gap-1.5",children:o.map((e,t)=>{let r="".concat(v||e.name||e.dataKey||"value"),n=y(b,e,r),o=p||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,d.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===l&&"items-center"),children:g&&(null==e?void 0:e.value)!==void 0&&e.name?g(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==n?void 0:n.icon)?(0,a.jsx)(n.icon,{}):!c&&(0,a.jsx)("div",{className:(0,d.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===l,"w-1":"line"===l,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===l,"my-0.5":j&&"dashed"===l}),style:{"--color-bg":o,"--color-border":o}}),(0,a.jsxs)("div",{className:(0,d.cn)("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[j?w:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});g.displayName="ChartTooltip";let p=l.s,v=n.forwardRef((e,t)=>{let{className:r,hideIcon:n=!1,payload:o,verticalAlign:s="bottom",nameKey:l}=e,{config:i}=u();return(null==o?void 0:o.length)?(0,a.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",r),children:o.map(e=>{let t="".concat(l||e.dataKey||"value"),r=y(i,e,t);return(0,a.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!n?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null});function y(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=r;return r in t&&"string"==typeof t[r]?n=t[r]:a&&r in a&&"string"==typeof a[r]&&(n=a[r]),n in e?e[n]:e[r]}v.displayName="ChartLegend"},83963:(e,t,r)=>{r.d(t,{j:()=>l});var a=r(12115),n=r(35317),o=r(56104),s=r(22100);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{user:r,loading:l}=(0,s.A)(),[d,i]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[f,h]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null),[p,v]=(0,a.useState)(null),[y,x]=(0,a.useState)(!0),b=(0,a.useMemo)(()=>t,[t.daily,t.limit]),w=(0,a.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return void u(!1);t?h(!0):u(!0),g(null);try{console.log("Fetching data for user:",r.uid,"path:",e);let s=[(0,n._M)("userId","==",r.uid)];if(b.daily){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());s.push((0,n._M)("createdAt",">=",n.Dc.fromDate(t)))}s.push((0,n.My)("createdAt","desc"));let l=b.limit||10;b.limit&&s.push((0,n.AB)(l)),t&&a&&s.push((0,n.HM)(a));let d=(0,n.P)((0,n.rJ)(o.db,e),...s),c=await (0,n.GG)(d),u=c.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}));console.log("Fetched ".concat(u.length," documents from ").concat(e,":"),u);let f=c.docs[c.docs.length-1]||null;v(f),x(!!b.limit&&u.length===l),t?i(e=>[...e,...u]):i(u)}catch(t){console.error("Error fetching data from",e,":",t),g(t instanceof Error?t:Error("Failed to fetch data"))}finally{u(!1),h(!1)}},[r,e,b]);(0,a.useEffect)(()=>{if(l)return void u(!0);r?(console.log("User authenticated, fetching data for path:",e),w(!1,null)):(console.log("No user, clearing data for path:",e),i([]),u(!1),x(!1),v(null),g(null))},[r,l,e]);let j=async(t,a)=>{if(!r){let e=Error("User not authenticated");throw g(e),e}let s=[...d];i(e=>e.map(e=>e.id===t?{...e,...a}:e));try{let r=(0,n.H9)(o.db,e,t);await (0,n.mZ)(r,a)}catch(e){throw g(e instanceof Error?e:Error("Failed to update document")),i(s),e}},_=async t=>{if(!r){let e=Error("User not authenticated");throw g(e),e}let a=[...d];i(e=>e.filter(e=>e.id!==t));try{await (0,n.kd)((0,n.H9)(o.db,e,t))}catch(e){throw g(e instanceof Error?e:Error("Failed to delete document")),i(a),e}};return{data:d,loading:c,error:m,addDocument:async t=>{if(!r){let e=Error("User not authenticated");throw g(e),e}let a="temp_".concat(Date.now()),s={id:a,...t,userId:r.uid,createdAt:new Date};i(e=>[s,...e].sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()));try{let s=await (0,n.gS)((0,n.rJ)(o.db,e),{...t,userId:r.uid,createdAt:n.Dc.now()});return i(e=>e.map(e=>e.id===a?{...e,id:s.id}:e)),s.id}catch(e){throw g(e instanceof Error?e:Error("Failed to add document")),i(e=>e.filter(e=>e.id!==a)),e}},updateDocument:j,deleteDocument:_,refetch:()=>w(!1,null),loadMore:()=>{y&&!f&&w(!0,p)},hasMore:y,loadingMore:f}}},87481:(e,t,r)=>{r.d(t,{dj:()=>f});var a=r(12115);let n=0,o=new Map,s=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],i={toasts:[]};function c(e){i=l(i,e),d.forEach(e=>{e(i)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(i);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}}]);